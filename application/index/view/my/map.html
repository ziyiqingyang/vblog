<script type="text/javascript" src="https://api.map.baidu.com/api?v=2.0&ak=TsdchagPfvvV76LVgEdRXBky"></script>

<style>
    .basicinfo {
        margin: 15px 0;
    }

    .basicinfo .row > .col-xs-4 {
        padding-right: 0;
    }

    .basicinfo .row > div {
        margin: 5px 0;
    }
    #container{width:1000px;height:600px;border:1px solid gray}  
</style>
<div id="content-container" class="container">
    <div class="row">
        <div class="col-md-2">
            {include file="common/sidenav" /}
        </div>
        <div class="col-md-10">
            <div class="panel panel-default ">
                <div class="panel-body">
                  
                  <div id="container"></div>  
                </div>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">  
if (typeof console == "undefined"){  
  window.console = {log: function(){}};  
}  
  
var map = new BMap.Map("container");  
map.centerAndZoom(new BMap.Point(108.75049,35.773359), 5);  
var stdMapCtrl = new BMap.NavigationControl({type: BMAP_NAVIGATION_CONTROL_SMALL})  
map.addControl(stdMapCtrl);  
//map.enableScrollWheelZoom();  
map.enableContinuousZoom();  
function getBoundary(data){  
    var bdary = new BMap.Boundary();  
    bdary.get(data.split("-")[0], function(rs){  
        console.log(rs);  
          
        var maxNum = -1, maxPly;
        var color = data.split("-")[1];  
          
        var count = rs.boundaries.length;   
        for(var i = 0; i < count; i++){  
            var ply = new BMap.Polygon(rs.boundaries[i], {strokeWeight: 1, strokeOpacity:0.5,fillColor:color,strokeColor: "#000000"});  
            map.addOverlay(ply);    
            /*var arrPts = ply.getPoints();  
            if(arrPts.length > maxNum){  
                maxNum = arrPts.length;  
                maxPly = ply;  
            } */ 

						//开始用"mouseover","mouseout"发现,鼠标移动过快,会多个省份也高亮了.所以改成 click了
						ply.addEventListener("click", function (e) {
						    var latlng = e.point;
						    var info = new BMap.InfoWindow(name + " " + latlng.lat + "," + latlng.lng, {width:220});
						    map.openInfoWindow(info, latlng);
						
						    //高亮闪烁显示鼠标点击的省
						    delay = 0;
						    for (flashTimes = 0; flashTimes < 3; flashTimes++) {
						        delay += 200;
						        setTimeout(function () {
						            ply.setFillColor("#FFFF00");
						        }, delay);
						
						        delay += 200;
						        setTimeout(function () {
						            ply.setFillColor(color);
						        }, delay);
						    }
						});
        }  
        if(maxPly){  
            map.setViewport(maxPly.getPoints());  
        }        
    });  
}  
map.clearOverlays();  
var datas = [
				"广西-#C8C1E3", "广东-#FBC5DC", "湖南-#DBEDC7", "贵州-#E7CCAF", "云南-#DBEDC7",
        "福建省-#FCFBBB", "江西-#E7CCAF", "浙江-#C8C1E3", "安徽-#FBC5DC", "湖北-#C8C1E3",
        "河南-#DBECC8", "江苏-#DBECC8", "四川-#FCFBBB", "海南省-#FCFBBB", "山东-#FCFBBB", "辽宁-#FCFBBB",
        "新疆-#FCFBBB", "西藏-#E7CCAF", "陕西-#E7CCAF", "河北-#E7CCAF", "黑龙江-#E7CCAF", "宁夏-#FBC5DC",
        "内蒙古自治区-#DBEDC7", "青海-#DBEDC7", "甘肃-#C8C1E3", "山西-#FBC5DC", "吉林省-#C8C1E3",
        "北京-#FBC5DC", "天津-#C8C1E3", "上海-#FCFBBB", "重庆市-#FBC5DC", "香港-#C8C1E3"
];


for(var i=0;i<datas.length;i++){  
    getBoundary(datas[i]);  
}  
</script>  